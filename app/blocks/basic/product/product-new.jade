include ../rating/rating
include ../action/action
include ../aside-label/aside-label
include ../../layout/timer/timer
include ../available/available
include ../review-small/review-small

//-	var args = {
			type: '',
			oldPrice: 0,
			specialPrice: 0,
			rating: false,
			added: ['favorite','compare','cart'],
			limit: true
			}

mixin product-label(label)
	+aside-label({'label': label}).aside__labels--product

mixin product-title()
	.product__title-text&attributes(attributes)
		| SAMSUNG G350E Galaxy Star
		| Advance White

mixin product-rating()
	.product__rating
		+reviewSmall().product__review-small
		+rating()

mixin product-image(args)
	.product__image
		img(src="http://dummyimage.com/217x143/4d494d/686a82.gif&text=placeholder+image",width="217",height="143", alt="placeholder+image")

mixin product-image-hot(args)
	.product__image-outer(class= args.position === 'horizontal' ? 'product__image-outer--horizontal' : '')
		+product-image(args)


mixin product-price(args)
	.product__price&attributes(attributes)
		if args.oldPrice
			s.product__price-old
				| !{args.oldPrice}
		strong.product__price-special
			| !{args.specialPrice ? args.specialPrice : '350 415 BYR'}

mixin product-features-icons()
	.product__features-icons
		span.product__features__icon-wrap
			img(src="./assets/images/android-icon.png", alt="android")
		span.product__features__icon-wrap
			img(src="./assets/images/2-sim-icon.png", alt="2-sim")
		span.product__features__icon-wrap
			img(src="./assets/images/3g-icon.png", alt="3g")
		span.product__features__icon-wrap
			img(src="./assets/images/ips-icon.png", alt="ips")
		span.product__features__icon-wrap
			img(src="./assets/images/4-cores-icon.png", alt="4-cores")
		span.product__features__icon-wrap
			img(src="./assets/images/gps-icon.png", alt="gps")

mixin product-actions()
	.product__actions
		if args.type !== 'set'
			+button().btn-sm.btn--red.product__buy-btn
				| Купить
		else
			+button().btn-sm.btn--red.product__set-btn
				| В комплект
		.product__actions__links
			+action({type:'compare'}).product__action
			+action({type:'favorite'}).product__action

mixin product-features-text()
	ul.product__features-text
		li.product__info__item Экран
			span.product__info__value  3"
		li.product__info__item Матрица
			span.product__info__value  16.4 МП (1/2.3")
		li.product__info__item Оптический зум
			span.product__info__value  12x
		li.product__info__item Съемка видео
			span.product__info__value  720p
		li.product__info__item Wi-Fi

mixin product-video()
	.product__video
		.product__video__heading
			| Видео
		.product__video__content
			// https://developers.google.com/youtube/iframe_api_reference
			iframe(width="100%", height="122", src="https://www.youtube.com/embed/X3uM4q26fSo?enablejsapi=1", frameborder="0", allowfullscreen)#video
			+link().product__video-link#js-start-video
				span.product__video-link__inner
					i.icon-video-play.product__video__icon
			script.
				var player;
				function onYouTubePlayerAPIReady() {
					// create the global player from the specific iframe (#video)
					player = new YT.Player('video', {
						events: {
							// call this function when player is ready to use
							'onReady': onPlayerReady
						}
					});
				}

				function onPlayerReady(event) {
					// bind events
					var playButton = document.getElementById("js-start-video");
					playButton.addEventListener("click", function() {
						playButton.style.display = 'none';
						player.playVideo()
					});
				}

mixin product-added(added)
	.product__added
		case added
			when 'favorite'
				.product__added__label.product__added__label--favorite
					i.icon-star-fff-18x18.product__added-icon.product__added-icon--favorite
				span.product__added__text Добавлено в избранное
			when 'compare'
				.product__added__label.product__added__label--compare
					i.icon-libra-fff-19x14.product__added-icon.product__added-icon--compare
				span.product__added__text Добавлено к сравнению
			when 'cart'
				.product__added__label.product__added__label--cart
					i.icon-cart-fff-22x19.product__added-icon.product__added-icon--cart
				span.product__added__text Добавлено в корзину

mixin product-head(rating)
	.product__head
		block
		if rating
			+product-rating()

mixin product-body(args, image)
	.product__body&attributes(attributes)
		if image
			+product-image(args)
		block

//- mixin product-foot(args)
//- 	.product__foot
//- 		if args.type === 'similar'
//- 			+product-features()
//- 			+product-actions()

mixin product-layout(args)
	.product.js-product&attributes(attributes)
		if args.labels
			+product-label(args.labels)
		a(href="/index-product.html").product__link
		block

mixin product-new(args)
	case args.type
		when 'hot'
			case args.position
				when 'horizontal'
					+product-layout(args).hot-product
						if args.limit
							+timer({type:'discount',limit: args.limit})
						else
							+timer({type:'discount'})
						.product__inner
							+product-image-hot(args)
							.product__info-outer.product__info-outer--horizontal
								+product-head(args.rating).product__head--hot
									+product-title().product__title-text--hot
								+product-body(args).product__body--hot
									.product__info__left
										+product-price(args).product__price--hot
										+button().btn-lg.btn--red.product__buy-btn.product__buy-btn--hot
											| Купить
									.product__info__right
										+product-features-text()
				default
					+product-layout(args).hot-product.hot-product--horizontal
						if args.limit
							+timer({type:'discount',limit: args.limit})
						else
							+timer({type:'discount'})
						.product__inner
							+product-image-hot(args)
							.product__info-outer
								+product-head(args.rating).product__head--hot
									+product-title().product__title-text--hot
								+product-body(args).product__body--hot
									.product__info__left
										+product-price(args).product__price--hot
										+button().btn-lg.btn--red.product__buy-btn.product__buy-btn--hot
											| Купить
									.product__info__right
										+product-features-text()



		when 'live'

			+product-layout(args).live-product
				+product-head(args.rating)
					+product-title()
				+product-body(args)
					+product-price(args)
				+product-added(args.added)

		when 'sidebar'

			+product-layout(args).sidebar-product

		default

			+product-layout(args)






	//- 		+product-body(args)
	//- 		if args.type !== 'categories' && args.live !== true
	//- 			+product-foot(args)
	//- 		if args.video
	//- 			+product-video()


	//- 		if args.present
	//- 			| подарок

	//- 		if args.added
	//- 			+product-added()

	//- if args.type === 'sidebar'
	//- 	.product.product-sidebar.js-product&attributes(attributes)
	//- 		.product__head.product-sidebar__head
	//- 			.product__title-text.product-sidebar__title-text
	//- 				| SAMSUNG G350E Galaxy Star
	//- 				| Advance White
	//- 		.product__body.product-sidebar__body
	//- 			.product__image
	//- 				img(src="http://dummyimage.com/217x143/4d494d/686a82.gif&text=placeholder+image",width="217",height="143", alt="placeholder+image")
	//- 			.product__price.product-sidebar__price
	//- 				if args.oldPrice
	//- 					s.product__price-old.product-sidebar__price-old
	//- 						| !{args.oldPrice}
	//- 				strong.product__price-special.product-sidebar__price-special
	//- 					| 22 415 BYR
	//- 			+button().btn-lg.btn-block.btn--red.product-sidebar__buy-btn
	//- 				| Купить
	//- 			+available({count:5})
	//- 		.product__foot.product-sidebar__foot
	//- 			+action({type:'drop'}).product__action
	//- 			+action({type:'compare'}).product__action
	//- 			+action({type:'favorite'}).product__action





